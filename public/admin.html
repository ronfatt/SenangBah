<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Â· SenangBah</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <main class="shell">
    <section class="card hero">
      <p class="eyebrow">Admin</p>
      <h1>Student Overview</h1>
      <p class="sub">Monitor usage and completion rate.</p>
      <div class="actions">
        <button class="btn ghost" id="adminLogout">Logout</button>
      </div>
    </section>

    <section class="card" id="adminLoginCard">
      <h2>Admin Access</h2>
      <form id="adminLoginForm" class="form">
        <label>Admin Key
          <input type="password" name="key" required />
        </label>
        <button class="btn primary" type="submit">Enter</button>
        <p id="adminLoginMsg" class="muted"></p>
      </form>
    </section>

    <section class="card" id="adminTableCard" style="display:none;">
      <h2>Students</h2>
      <div class="table-wrap">
        <table class="table" id="adminTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Class</th>
              <th>Teacher</th>
              <th>Band</th>
              <th>Sessions</th>
              <th>Completed</th>
              <th>Completion %</th>
              <th>Last Active</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="card" id="chatSummaryCard" style="display:none;">
      <div class="row between">
        <h2>Chat Summary</h2>
        <a class="btn ghost" id="chatExportBtn" href="/api/admin/chat-export">Export CSV</a>
      </div>
      <div class="table-wrap">
        <table class="table" id="chatTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Chat Count</th>
              <th>Last Chat</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="card" id="adminDeleteCard" style="display:none;">
      <h2>Reset or Delete (By Email)</h2>
      <form id="deleteForm" class="form">
        <label>Email
          <input type="email" name="email" placeholder="student@email.com" required />
        </label>
        <div class="actions">
          <button class="btn ghost" type="button" id="resetByEmail">Reset Data</button>
          <button class="btn primary" type="submit">Delete Student</button>
        </div>
        <p class="muted" id="deleteMsg"></p>
      </form>
    </section>

    <section class="card" id="schoolCodeCard" style="display:none;">
      <h2>Create School Code</h2>
      <form id="schoolCodeForm" class="form">
        <label>School Code
          <input type="text" name="code" placeholder="e.g. SENANG" required />
        </label>
        <label>School Name (optional)
          <input type="text" name="school_name" placeholder="e.g. SMK Senang" />
        </label>
        <button class="btn primary" type="submit">Create Code</button>
        <p class="muted" id="schoolCodeMsg"></p>
      </form>
    </section>

    <section class="card" id="pilotCard" style="display:none;">
      <h2>Pilot Registration Applications</h2>
      <div class="table-wrap">
        <table class="table" id="pilotTable">
          <thead>
            <tr>
              <th>Submitted</th>
              <th>Name</th>
              <th>Role</th>
              <th>Email</th>
              <th>School</th>
              <th>Plan</th>
              <th>Status</th>
              <th>AI Summary</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <script src="/admin.js"></script>
</body>
</html>
